{% extends 'acct/base.html'%}
{% load static %}
{% load widget_tweaks %} 

{% block title%} User Profile {% endblock title%}

{% block body %}  

<div class="container-fluid rounded bg-white mt-5">
    <div class="row">
        {% if request.user.is_authenticated  %}
        <div class="col-md-4 border-right">
            <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                <img class="rounded-circle mt-5" src="https://i.imgur.com/0eg0aG0.jpg" width="90">
                <span class="font-weight-bold">{{request.user.firstname}} {{request.user.lastname}}</span>
                <span class="text-black-50">@{{request.user.username}}</span>
                <span class="text-black-50">{{request.user.email}}</span>
            </div>
            <hr>
            <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                <h3 class="font-weight-bold ">{{request.user.username}} Testimonials and Review </h3>
                <span class="text-black-50">{{request.user.email}}</span>

                <div class="d-flex flex-column align-items-center text-center p-3 py-5">

                </div>
            </div>            
        </div>
        <div class="col-md-8">
            <div class="p-3 py-5">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex flex-row align-items-center back">
                        <a href="{% url 'home'%}" class="text-dark" style="text-decoration:none;">
                        <i class="icon-arrow-left mr-1 mb-1"></i>
                        <span>Back to home</span>
                    </a>
                    </div>
                    <h6 class="text-right" > {{request.user.username}}'s Profile</h6>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6"><input type="text" class="form-control edit-text" placeholder="first name" value="{{request.user.firstname}}"readonly ></div>
                    <div class="col-md-6"><input type="text" class="form-control edit-text" value="{{request.user.lastname}}" placeholder="lastname" readonly></div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-6"><input type="text" class="form-control edit-text" placeholder="Email" value="{{request.user.email}}" readonly></div>
                    <div class="col-md-6"><input type="text" class="form-control edit-text" value="{{request.user.username}}" placeholder="Username" readonly></div>
                </div>  

                <div class="mt-5 text-right"><a href="{% url 'update' %}"><button class="btn btn-primary profile-button" type="submit" id="edit">Edit profile</button></a></div>
          
            </div>
            <hr>
            <div class="p-3 py-5">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="container">
                        <div class="d-flex flex-row align-items-center ">
                            <h3 class="text-center" > {{request.user.username}}'s Booking History</h6>
                        </div>
                        <table class="table table-bordered">
                            <thead>
                              <tr>
                                <th scope="col">s/n</th>
                                <th scope="col">User</th>
                                <th scope="col">Pick Up Location</th>
                                <th scope="col">Drop Off Location</th>
                                <th scope="col">Pick Up Date</th>
                                <th scope="col">Drop Off Date</th>
                                <th scope="col">Pick Up Time</th>
                                <th scope="col">Booked At</th>
                              </tr>
                            </thead>
                            <tbody>
                                {% for b in booking_history  %}
                                <tr>
                                <td scope="row">{{forloop.counter}}</td>
                                <td>{{b.user}}</td>
                                <td>{{b.pick_up_location}}</td>
                                <td>{{b.drop_off_location}}</td>
                                <td>{{b.pick_up_date}}</td>
                                <td>{{b.drop_off_date}}</td>
                                <td>{{b.pick_up_time}}</td>
                                <td>{{b.created_at}}</td>
                                {% endfor %}
                                <tr>
                            </tbody>
                          </table>
                   
                    </div>
                </div>
            </div>
        </div>
        {% endif %} 
    </div>
</div> 

<script src="{% static 'acct/js/main.js' %}"></script>

{% endblock body %} 